variable "public_key_certus_one" {
    description = "Certus One public key"
    hex_string = "2a953a2e8b1052eb70c1d7b556b087deed598b55608396686c1c811b9796c763078687ce10459f4f25fb7a0fbf8727bb0fb51e00820e93a123f652ee843cf08d"
}

variable "public_key_staked" {
    description = "Staked public key"
    hex_string = "2766db08820e311b22e109801ab8ea505b12e3df3d91ebc87c999ffb6929d1abb0ade987c74aa37db26eea4086ee738a2f34a5594edb8760da0eac5be356b731"
}

variable "public_key_figment" {
    description = "Figment public key"
    hex_string = "54177ff4a8329520b76efd86f8bfce5c942554db16e673267dc1133b3f5e230b2d8cbf90fe274946045d4491de288d736680edc2ee9ee5b1b15416b0a34806c4"
}

variable "public_key_chainode_tech" {
    description = "ChainodeTech public key"
    hex_string = "7fa3e98fcc2621337b217b61408a98facaabd25bad2b158438728ce863c14708cfcda1f3b50a16ca0211199079fb338d479a54546ec3c5f775af23a7d7f4fb24"
}

variable "public_key_inotel" {
    description = "Inotel public key"
    hex_string = "0bdcbccc0297c2a4f92a7c39358c42f22a8ed700a78bd05c39c8b61aaf2338e825b6c0d26d1f2a2ae4129cd751201f73d7234c753bd0735212a5288b19748fd2"
}

variable "public_key_hash_quark" {
    description = "HashQuark public key"
    hex_string = "cfd90084be68de514fe14a7c281f492223f045566f859ea5c166d6e60bc650c23940909a8e96c2fbffbd15a598b4e6a5b5aa14c126bf58cc1a9e396fe7771965"
}

variable "public_key_chain_layer" {
    description = "Chain Layer public key"
    hex_string = "8edf3f9d997357a0e2c916ee090392c3a645ebac4f6cd8f826d3ecc0173b33bf06b7c14e8002fc9a5d01af9824a5cb3778472cd477e0ab378091448bca6f0417"
}

variable "public_key_dokia_capital" {
    description = "Dokia Capital One public key"
    hex_string = "6200deeadd3b4e2cd0a168d42e720a3b88d3ce4769ff2808086e6fd36110fc05c591ccbf91368609dc3b21203e58c9883d4f580085469bef8d5bdcd26eb8ad69"
}

variable "public_key_forbole" {
    description = "Forbole public key"
    hex_string = "d5225476d7849b362226952ffc561bab99832f3f8b99741f6d81bbeaffa8e7f6e54a85e5029a3b510707eaa9684df496e4b1268075ad0328693a30bf1b1e0033"
}

variable "public_key_staking_fund" {
    description = "Stacking Fund public key"
    hex_string = "d9fa78b5b958bea1929080b8ad96dc555d34b051a27aebf711eb1186b807b0448316d994606ac807121838d6c41a58f308bc6307acdf69491fa4b17282f3e66f"
}

variable "public_key_moonlet_wallet" {
    description = "Moonlet Wallet public key"
    hex_string = "cc64af75ec2e2741fb9af9f6191cb9ee187d6d26af4d1e96d7bab47e6ec09be12d3192030dc4bbf54d1da319a7a2acfc7a9dd4c644af6646a4aaa02b1024bbab"
}

variable "public_key_p2p_validator" {
    description = "P2P Validator public key"
    hex_string = "b5943b6e284682ad2e011d6962d41febf86af2f5fc0c9c8f4b81358ff077f9c96ba0880eaf93541eae94b4fa41dba66dab7fb0201cc9af7c75681e5719b0c95f"
}

variable "public_key_01_node" {
    description = "01node public key"
    hex_string = "0cfc9d5b5dcf702a1525f9d4ed1841e8eb8b34434cc82470dd35435f1dbdc73ffb51544b7500394eac9c7fa567868b495326075147a2d809ebbfd43273eeec91"
}

variable "public_key_mcfv2mainnet" {
    description = "MCFV2MAINNET public key"
    hex_string = "0aa78894d894a15933969f5826347439e2c309f2049277a10066c9197840499498ad19ee3d1b291f932ec0890bbdafcec292c4f02a446670cd0084f997e25e2f"
}

variable "public_key_everstake" {
    description = "Everstake public key"
    hex_string = "00f400e3fe40f64032485aad9240ead45a8e1fc83ec08c96db861c0eca155ac898df8673e778e3ccaae8a0f9e6af415fe40e99b0cbc88d7610e536b6041b07fb"
}

variable "public_key_chorus_one" {
    description = "Chorus One public key"
    hex_string = "604f384174c7ed3a0dc5f476569a978266a7943bd775449d1b8b27f4eb8beb99cdf095f9200a2dabb1bc5d68c3d96ea3d47f4d34499d59953669b6c8c093d578"
}

variable "public_key_syncnode" {
    description = "Syncnode public key"
    hex_string = "4881345cbb299fa7c60ab2d16cb7fe7bf8d14675506ef6eb6037038b5b7092ea0a9e4d0b53ba3904edd99f86717d6ba81dffe44eb5b23c6fd22c91ab73c33021"
}

variable "public_key_triton" {
    description = "Triton public key"
    hex_string = "ee3d4cc17633afe7e1794fcfd728e0643325e3d130eb1daa39c0c5cb05a200b43876117a182cabdcc3795632aa529473a0c8245f9e4f6e43e54c3f1da28bcb82"
}

variable "public_key_staking_facilities" {
    description = "Staking Facilities public key"
    hex_string = "21f338444e96af31cf44958acf5764844efbddace3b823ed761c340c59ed2685d829818c83eebe8f00f783f1048a53515845536668a9e0c059ade7579a0f4204"
}

variable "public_key_ftx" {
    description = "FTX public key"
    hex_string = ""
}

variable "public_key_x_labs" {
    description = "xLabs public key"
    hex_string = "47b15c5039dcb2850b59bea323db662cc597dd7d48fe6b8dbb6cd8704c45854bf0e92fa267c844ba1a700105e157c8099d55c82316cb5e50c56a5d0920ff91c2"
}

variable "guardian_set_1" {
    description = "Guardians part of the Set #1"
    default = [
        public_key_certus_one.bytes,
        public_key_staked.bytes,
        public_key_figment.bytes,
        public_key_chainode_tech.bytes,
        public_key_inotel.bytes,
        public_key_hash_quark.bytes,
        public_key_chain_layer.bytes,
        public_key_dokia_capital.bytes,
        public_key_forbole.bytes,
        public_key_staking_fund.bytes,
        public_key_moonlet_wallet.bytes,
        public_key_p2p_validator.bytes,
        public_key_01_node.bytes,
        public_key_mcfv2mainnet.bytes,
        public_key_everstake.bytes,
        public_key_chorus_one.bytes,
        public_key_syncnode.bytes,
        public_key_triton.bytes,
        public_key_staking_facilities.bytes,
    ]
}

variable "guardian_set_2" {
    description = "Guardians part of the Set #2"
    default = [
        public_key_certus_one.bytes,
        public_key_staked.bytes,
        public_key_figment.bytes,
        public_key_chainode_tech.bytes,
        public_key_inotel.bytes,
        public_key_hash_quark.bytes,
        public_key_chain_layer.bytes,
        public_key_ftx.bytes,
        public_key_forbole.bytes,
        public_key_staking_fund.bytes,
        public_key_moonlet_wallet.bytes,
        public_key_p2p_validator.bytes,
        public_key_01_node.bytes,
        public_key_mcfv2mainnet.bytes,
        public_key_everstake.bytes,
        public_key_chorus_one.bytes,
        public_key_syncnode.bytes,
        public_key_triton.bytes,
        public_key_staking_facilities.bytes,
    ]
}

variable "guardian_set_3" {
    description = "Guardians part of the Set #3"
    default = [
        public_key_certus_one.bytes,
        public_key_staked.bytes,
        public_key_figment.bytes,
        public_key_chainode_tech.bytes,
        public_key_inotel.bytes,
        public_key_hash_quark.bytes,
        public_key_chain_layer.bytes,
        public_key_x_labs.bytes,
        public_key_forbole.bytes,
        public_key_staking_fund.bytes,
        public_key_moonlet_wallet.bytes,
        public_key_p2p_validator.bytes,
        public_key_01_node.bytes,
        public_key_mcfv2mainnet.bytes,
        public_key_everstake.bytes,
        public_key_chorus_one.bytes,
        public_key_syncnode.bytes,
        public_key_triton.bytes,
        public_key_staking_facilities.bytes,
    ]
}

variable "guardian_rotations" {
    description = "List of all the guardians rotations"
    default = [
        guardian_set_1.value, 
        guardian_set_2.value,
        guardian_set_3.value
    ]
}

write "solana_tx" "update_guardian_set" {
    for_each = guardian_rotations
    description = "Guardian Set Update " + each.index
    instruction {
        description = "Submit rotation"
        program_id = '11111111111111111111111111111111'
        data = each.value
    }
}

read "wormhole_vaa" "guardian_rotation" {
    for_each = guardian_rotations
    description = "Spy Wormhole p2p network, waiting for ${each.key} to be approved by Guardians"
    txid = solana_tx.update_guardian_set[each.index].txid
}
