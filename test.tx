
// Sepolia devnet:
// anvil -m "candy maple cake sugar pudding cream honey rich smooth crumble sweet treat" -f https://sepolia.infura.io/v3/14e311a57f994d89a83883926cf95c7c --block-time 5
runtime "batch" {
    inputs = [
        { 
            evm_defaults: evm::chain("sepolia", "http://localhost:8545")
        },
    ]
}

runtime "addon::evm" {
    defaults {
        chain_id = env.evm_defaults.chain_id
        rpc_api_url = env.evm_defaults.rpc_api_url
    }
}

wallet "deployer" "evm::mnemonic" {
    mnemonic = "model elbow sunny fashion orient nominee symbol odor joy clown range lake"
}

input "abi" {
    value = "[{\"type\": \"constructor\",\"inputs\": [{\"name\": \"permit2\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"multicaller\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"owner\",\"type\": \"address\",\"internalType\": \"address\"}],\"stateMutability\": \"nonpayable\"},{\"type\": \"receive\",\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"_EIP_712_RELAYER_WITNESS_TYPE_HASH\",\"inputs\": [],\"outputs\": [{\"name\": \"\",\"type\": \"bytes32\",\"internalType\": \"bytes32\"}],\"stateMutability\": \"view\"},{\"type\": \"function\",\"name\": \"_RELAYER_WITNESS_TYPE_STRING\",\"inputs\": [],\"outputs\": [{\"name\": \"\",\"type\": \"string\",\"internalType\": \"string\"}],\"stateMutability\": \"view\"},{\"type\": \"function\",\"name\": \"cancelOwnershipHandover\",\"inputs\": [],\"outputs\": [],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"cleanupERC20\",\"inputs\": [{\"name\": \"token\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"refundTo\",\"type\": \"address\",\"internalType\": \"address\"}],\"outputs\": [],\"stateMutability\": \"nonpayable\"},{\"type\": \"function\",\"name\": \"completeOwnershipHandover\",\"inputs\": [{\"name\": \"pendingOwner\",\"type\": \"address\",\"internalType\": \"address\"}],\"outputs\": [],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"delegatecallMulticall\",\"inputs\": [{\"name\": \"targets\",\"type\": \"address[]\",\"internalType\": \"address[]\"},{\"name\": \"datas\",\"type\": \"bytes[]\",\"internalType\": \"bytes[]\"},{\"name\": \"values\",\"type\": \"uint256[]\",\"internalType\": \"uint256[]\"},{\"name\": \"refundTo\",\"type\": \"address\",\"internalType\": \"address\"}],\"outputs\": [{\"name\": \"\",\"type\": \"bytes\",\"internalType\": \"bytes\"}],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"owner\",\"inputs\": [],\"outputs\": [{\"name\": \"result\",\"type\": \"address\",\"internalType\": \"address\"}],\"stateMutability\": \"view\"},{\"type\": \"function\",\"name\": \"ownershipHandoverExpiresAt\",\"inputs\": [{\"name\": \"pendingOwner\",\"type\": \"address\",\"internalType\": \"address\"}],\"outputs\": [{\"name\": \"result\",\"type\": \"uint256\",\"internalType\": \"uint256\"}],\"stateMutability\": \"view\"},{\"type\": \"function\",\"name\": \"permitMulticall\",\"inputs\": [{\"name\": \"user\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"permit\",\"type\": \"tuple\",\"internalType\": \"struct ISignatureTransfer.PermitBatchTransferFrom\",\"components\": [{\"name\": \"permitted\",\"type\": \"tuple[]\",\"internalType\": \"struct ISignatureTransfer.TokenPermissions[]\",\"components\": [{\"name\": \"token\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"amount\",\"type\": \"uint256\",\"internalType\": \"uint256\"}]},{\"name\": \"nonce\",\"type\": \"uint256\",\"internalType\": \"uint256\"},{\"name\": \"deadline\",\"type\": \"uint256\",\"internalType\": \"uint256\"}]},{\"name\": \"targets\",\"type\": \"address[]\",\"internalType\": \"address[]\"},{\"name\": \"datas\",\"type\": \"bytes[]\",\"internalType\": \"bytes[]\"},{\"name\": \"values\",\"type\": \"uint256[]\",\"internalType\": \"uint256[]\"},{\"name\": \"refundTo\",\"type\": \"address\",\"internalType\": \"address\"},{\"name\": \"permitSignature\",\"type\": \"bytes\",\"internalType\": \"bytes\"}],\"outputs\": [{\"name\": \"\",\"type\": \"bytes\",\"internalType\": \"bytes\"}],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"renounceOwnership\",\"inputs\": [],\"outputs\": [],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"requestOwnershipHandover\",\"inputs\": [],\"outputs\": [],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"transferOwnership\",\"inputs\": [{\"name\": \"newOwner\",\"type\": \"address\",\"internalType\": \"address\"}],\"outputs\": [],\"stateMutability\": \"payable\"},{\"type\": \"function\",\"name\": \"withdraw\",\"inputs\": [],\"outputs\": [],\"stateMutability\": \"nonpayable\"},{\"type\": \"event\",\"name\": \"OwnershipHandoverCanceled\",\"inputs\": [{\"name\": \"pendingOwner\",\"type\": \"address\",\"indexed\": true,\"internalType\": \"address\"}],\"anonymous\": false},{\"type\": \"event\",\"name\": \"OwnershipHandoverRequested\",\"inputs\": [{\"name\": \"pendingOwner\",\"type\": \"address\",\"indexed\": true,\"internalType\": \"address\"}],\"anonymous\": false},{\"type\": \"event\",\"name\": \"OwnershipTransferred\",\"inputs\": [{\"name\": \"oldOwner\",\"type\": \"address\",\"indexed\": true,\"internalType\": \"address\"},{\"name\": \"newOwner\",\"type\": \"address\",\"indexed\": true,\"internalType\": \"address\"}],\"anonymous\": false},{\"type\": \"error\",\"name\": \"AddressEmptyCode\",\"inputs\": [{\"name\": \"target\",\"type\": \"address\",\"internalType\": \"address\"}]},{\"type\": \"error\",\"name\": \"AddressInsufficientBalance\",\"inputs\": [{\"name\": \"account\",\"type\": \"address\",\"internalType\": \"address\"}]},{\"type\": \"error\",\"name\": \"AlreadyInitialized\",\"inputs\": []},{\"type\": \"error\",\"name\": \"ArrayLengthsMismatch\",\"inputs\": []},{\"type\": \"error\",\"name\": \"CallFailed\",\"inputs\": []},{\"type\": \"error\",\"name\": \"FailedInnerCall\",\"inputs\": []},{\"type\": \"error\",\"name\": \"InvalidTarget\",\"inputs\": []},{\"type\": \"error\",\"name\": \"NativeTransferFailed\",\"inputs\": []},{\"type\": \"error\",\"name\": \"NewOwnerIsZeroAddress\",\"inputs\": []},{\"type\": \"error\",\"name\": \"NoHandoverRequest\",\"inputs\": []},{\"type\": \"error\",\"name\": \"SafeERC20FailedOperation\",\"inputs\": [{\"name\": \"token\",\"type\": \"address\",\"internalType\": \"address\"}]},{\"type\": \"error\",\"name\": \"Unauthorized\",\"inputs\": []}]"
}
input "bytecode" {
    value = "0x60c0346100c557601f61113338819003918201601f19168301916001600160401b038311848410176100ca578084926060946040528339810103126100c557610047816100e0565b906100606040610059602084016100e0565b92016100e0565b6001600160a01b0392831660805260a09190915216638b78c6d81981905560007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a360405161103e90816100f58239608051816109dd015260a05181610edc0152f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b51906001600160a01b03821682036100c55756fe6080604052600436101561001b575b361561001957600080fd5b005b60003560e01c806325692962146100eb5780633806a3cf146100e65780633ccfd60b146100e15780633dad0c9c146100dc57806354d1f13d146100d757806366b9ca7b146100d25780636e305f80146100cd578063715018a6146100c85780638da5cb5b146100c3578063c99a0d65146100be578063f04e283e146100b9578063f2fde38b146100b45763fee81cf40361000e57610897565b610857565b610803565b6107c8565b61079b565b610754565b6106af565b6105f2565b610445565b610399565b61032f565b6102fb565b610100565b60009103126100fb57565b600080fd5b60008060031936011261014c5763389a75e1600c523381526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d8280a280f35b80fd5b634e487b7160e01b600052604160045260246000fd5b606081019081106001600160401b0382111761018057604052565b61014f565b604081019081106001600160401b0382111761018057604052565b6001600160401b03811161018057604052565b608081019081106001600160401b0382111761018057604052565b90601f801991011681019081106001600160401b0382111761018057604052565b604051906101fc82610185565b565b6001600160401b03811161018057601f01601f191660200190565b6040519060a082018281106001600160401b03821117610180576040526064825263756e742960e01b6080837f52656c617965725769746e657373207769746e6573732952656c61796572576960208201527f746e65737328616464726573732072656c6179657229546f6b656e5065726d6960408201527f7373696f6e73286164647265737320746f6b656e2c75696e7432353620616d6f60608201520152565b919082519283825260005b8481106102e7575050826000602080949584010152601f8019910116010190565b6020818301810151848301820152016102c6565b346100fb5760003660031901126100fb5761032b610317610219565b6040519182916020835260208301906102bb565b0390f35b346100fb5760008060031936011261014c57610349610a6f565b808080804733620186a0f11561035c5780f35b604051633d2cec6f60e21b8152600490fd5b6001600160a01b038116036100fb57565b600435906101fc8261036e565b60a435906101fc8261036e565b346100fb5760403660031901126100fb576004356103b68161036e565b602435906103c38261036e565b6040516370a0823160e01b81523060048201526001600160a01b039190911691602082602481865afa9182156104405760009261040c575b508161040357005b61001992610a8c565b9091506020813d602011610438575b81610428602093836101ce565b810103126100fb575190386103fb565b3d915061041b565b6108ce565b60008060031936011261014c5763389a75e1600c52338152806020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c928280a280f35b6001600160401b0381116101805760051b60200190565b90916060828403126100fb5760408051906104bd82610165565b819380356001600160401b0381116100fb57810186601f820112156100fb5780356020916104ea8261048c565b916104f7865193846101ce565b808352838084019160061b830101918a83116100fb578401905b8282106105305750505084528181013590840152810135910152909150565b86828c03126100fb57848791825161054781610185565b84356105528161036e565b81528285013583820152815201910190610511565b9181601f840112156100fb578235916001600160401b0383116100fb576020808501948460051b0101116100fb57565b81601f820112156100fb578035906105ae826101fe565b926105bc60405194856101ce565b828452602083830101116100fb57816000926020809301838601378301015290565b9060206105ef9281815201906102bb565b90565b60e03660031901126100fb5761060661037f565b6001600160401b036024358181116100fb576106269036906004016104a3565b916044358281116100fb5761063f903690600401610567565b6064358481116100fb57610657903690600401610567565b6084929192358681116100fb57610672903690600401610567565b93909261067d61038c565b9560c4359889116100fb5761032b9961069d6106a39a3690600401610597565b986108da565b604051918291826105de565b60803660031901126100fb576001600160401b036004358181116100fb576106db903690600401610567565b916024358181116100fb576106f4903690600401610567565b90916044359081116100fb5761070e903690600401610567565b916064359361071c8561036e565b81871480159061074a575b6107385761032b966106a396610e96565b604051631dc0052360e11b8152600490fd5b5083821415610727565b60008060031936011261014c57610769610a6f565b80638b78c6d8198181547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a35580f35b346100fb5760003660031901126100fb57638b78c6d819546040516001600160a01b039091168152602090f35b346100fb5760003660031901126100fb5760206040517f4910260415865c6d3ecf96968c7d912a0d533a72c3479ab1e1df0f4eb86fb0088152f35b60203660031901126100fb5760043561081b8161036e565b610823610a6f565b63389a75e1600c52806000526020600c2090815442116108495760006100199255610f6c565b636f5e88186000526004601cfd5b60203660031901126100fb5760043561086f8161036e565b610877610a6f565b8060601b156108895761001990610f6c565b637448fbae6000526004601cfd5b346100fb5760203660031901126100fb576004356108b48161036e565b63389a75e1600c52600052602080600c2054604051908152f35b6040513d6000823e3d90fd5b90999899858414801590610a65575b610738578a51610901575b50506105ef979850610e96565b969297936040999692959199519860209960208101906109688161095a3385919091602060408201937f4910260415865c6d3ecf96968c7d912a0d533a72c3479ab1e1df0f4eb86fb008835260018060a01b0316910152565b03601f1981018352826101ce565b519020966109778a5151610b4d565b9c60005b8b5180518210156109c557908f818f91826109be9361099c84600198610bc6565b5101516109a76101ef565b308152918201526109b88383610bc6565b52610bc6565b500161097b565b505093979b92969a5093979b90949860018060a01b037f00000000000000000000000000000000000000000000000000000000000000001693610a06610219565b853b156100fb5760405163fe8ec1a760e01b81529d8e958695610a2c9560048801610c32565b03815a6000948591f1978815610440576105ef98610a4c575b89986108f4565b80610a59610a5f926101a0565b806100f0565b38610a45565b50878614156108e9565b638b78c6d819543303610a7e57565b6382b429006000526004601cfd5b60405163a9059cbb60e01b602082019081526001600160a01b0393841660248301526044808301959095529381529291610ae691610ac9856101b3565b1692600080938192519082875af1610adf610e66565b9084610fa5565b908151918215159283610b21575b505050610afe5750565b604051635274afe760e01b81526001600160a01b03919091166004820152602490fd5b819293509060209181010312610b4957602001519081159182150361014c5750388080610af4565b5080fd5b90610b578261048c565b604090610b6760405191826101ce565b8381528093610b78601f199161048c565b019160009060005b848110610b8e575050505050565b6020908251610b9c81610185565b848152828581830152828701015201610b80565b634e487b7160e01b600052603260045260246000fd5b8051821015610bda5760209160051b010190565b610bb0565b90815180825260208080930193019160005b828110610bff575050505090565b9091929382604082610c2660019489516020809160018060a01b0381511684520151910152565b01950193929101610bf1565b9491969593909660c086526101208601978051606060c08901528051809a5261014088019960208092019160005b828110610cd15750505050610c9f6105ef9899610cc3969594936040846020610cb196015160e08d015201516101008b015289820360208b0152610bdf565b6001600160a01b039094166040880152565b606086015284820360808601526102bb565b9160a08184039101526102bb565b835180516001600160a01b03168e52602090810151908e01526040909c019b92810192600101610c60565b9190811015610bda5760051b0190565b356105ef8161036e565b908060209392818452848401376000828201840152601f01601f1916010190565b81835290916001600160fb1b0383116100fb5760209260051b809284830137010190565b97969593909492918060808a0160808b525260a08901959060005b818110610e37575050506020888603818a015281865280860195818360051b82010196846000925b858410610dd8575050505050505082606092610dc592886101fc97960360408a0152610d37565b6001600160a01b03909216940193909352565b90919293949598601f198282030184528935601e19843603018112156100fb5783018681019190356001600160401b0381116100fb5780360383136100fb57610e2688928392600195610d16565b9b0194019401929594939190610d9e565b90919293966001908435610e4a8161036e565b60a083901b839003168152602090810198959401929101610d76565b3d15610e91573d90610e77826101fe565b91610e8560405193846101ce565b82523d6000602084013e565b606090565b959294919493909360005b858110610f165750600096949193610ed89388979561095a93604051978896602088019a63991f255f60e01b8c5260248901610d5b565b51907f00000000000000000000000000000000000000000000000000000000000000005af4610f05610e66565b9015610f0e5790565b602081519101fd5b737777777f279eba3d3ad8f4e708545291a6fdba8b610f4d610f41610f3c848a8d610cfc565b610d0c565b6001600160a01b031690565b14610f5a57600101610ea1565b60405163416aebb560e11b8152600490fd5b60018060a01b0316638b78c6d8198181547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a355565b90610fcc5750805115610fba57805190602001fd5b604051630a12f52160e11b8152600490fd5b81511580610fff575b610fdd575090565b604051639996b31560e01b81526001600160a01b039091166004820152602490fd5b50803b15610fd556fea2646970667358221220dc5b01dde07036730dec3969b3f9604b7368ddc0fbcf24704e7f5ac5edf3bff164736f6c63430008170033"
}
action "deploy_erc20_router" "evm::deploy_contract_create2" {
    description = "Deploys the ERC20Router contract using the default Foundry Create2 Factory"
    contract = { bytecode: input.bytecode, abi: input.abi}
    constructor_args = [
        evm::address("0xe95cb29b58d9548b99b3d619c825294569be2dfa"),
        evm::address("0xdfca9b459ba335f9178b1e0c3365881e862d960e"),
        evm::address("0xf70da97812CB96acDF810712Aa562db8dfA3dbEF"),
    ]
    salt = "0x0000000000000000000000000000000000000000177317f7617d575e615800aa"

    confirmations = 1

    signer = wallet.deployer
}