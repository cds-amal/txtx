# Test file for flow validation in doctor command

flow "mainnet" {
    description = "Production environment"
    chain_id = 1
    rpc_url = input.mainnet_rpc  # Should validate input reference
}

// This should error - missing required attribute 'chain_id'
flow "test_undefined_rpc_url" {
    rpc_url = input.mainnet_rpc  # Should validate input reference
}

# This is actually VALID - flow attributes are available everywhere
variable "network_chain_id" {
    value = flow.chain_id  # OK: flow attributes available throughout execution
}

# Valid variable definition
variable "base_fee" {
    value = 1000000000
}

# Valid signer using input
signer "deployer" "evm::secret_key" {
    secret_key = input.private_key
}

# This should error - undefined variable
action "deploy" "evm::deploy" {
    signer = signer.deployer
    fee = variable.base_fee  # OK: defined variable
}

# This should work - valid action output
output "tx_hash" {
    value = action.deploy.tx_hash  # OK: tx_hash is valid output
}

output "output3" {
    value = "test"
}
