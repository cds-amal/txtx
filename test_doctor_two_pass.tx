// Test file to verify two-pass validation
addon "evm" {
    rpc_api_url = "https://eth.example.com"
}

// Define a signer
signer "operator" "evm::private_key" {
    private_key = "0x1234"
}

// Action 1 references the signer
action "action1" "evm::send_eth" {
    from = signer.operator.address
    to = "0x456"
    value = "1000"
}

// Action 2 references action1 (forward reference is OK)
action "action2" "evm::send_eth" {
    from = signer.operator.address
    to = "0x789"
    value = "2000"
    depends_on = [action.action1.tx_hash]
}

// Output references both actions
output "tx1" {
    value = action.action1.tx_hash
}

output "tx2" {
    value = action.action2.tx_hash
}

// This should cause an error - referencing undefined action
output "bad_ref" {
    value = action.undefined_action.tx_hash
}